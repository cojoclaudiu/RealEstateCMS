@page "/buildings/create/{phaseId:int}"
@rendermode InteractiveServer

<PageTitle>Adaugă Clădire</PageTitle>

<div class="page-header">
    <h1>Adaugă Clădire Nouă</h1>
</div>

@if (phase == null)
{
    <p class="loading">Se încarcă...</p>
}
else
{
    <div class="form-container">
        <EditForm Model="@building"
                  OnValidSubmit="@HandleValidSubmit"
                  FormName="CreateBuildingForm">

            <DataAnnotationsValidator />

            <!-- Phase (read-only) -->
            <div class="form-group">
                <label>Fază</label>
                <p class="form-text">
                    <strong>@phase.Name</strong>
                    (@phase.Development.Name)
                </p>
            </div>

            <!-- Building name -->
            <div class="form-group">
                <label for="name">Nume clădire *</label>
                <InputText id="name"
                           @bind-Value="building.Name"
                           class="form-control"
                           placeholder="ex. Blocul A" />
                <ValidationMessage For="@(() => building.Name)" />
            </div>

            <!-- Floors count -->
            <div class="form-group">
                <label for="floors">Număr de etaje *</label>
                <InputNumber id="floors"
                             @bind-Value="building.FloorsCount"
                             class="form-control"
                             min="1" />
                <ValidationMessage For="@(() => building.FloorsCount)" />
            </div>

            <!-- Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    Salvează
                </button>
                <a href="/buildings/@PhaseId" class="btn btn-secondary">
                    Anulează
                </a>
            </div>

            @if (!string.IsNullOrEmpty(errorMessage))
            {
                <div class="alert alert-danger">
                    @errorMessage
                </div>
            }
        </EditForm>
    </div>
}
