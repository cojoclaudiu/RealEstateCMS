@page "/buildings/edit/{id:int}"
@rendermode InteractiveServer
@inherits EditBuilding

<EditPageLayout Title="Editează Clădire" Entity="building">

    <EditForm Model="@building"
              OnValidSubmit="@HandleValidSubmit"
              FormName="EditBuildingForm">

        <DataAnnotationsValidator />

        <!-- Phase -->
        <div class="form-group">
            <label>Fază</label>
            <p class="form-text">
                <strong>@building!.Phase.Name</strong>
                (@building.Phase.Development.Name)
            </p>
        </div>

        <!-- Name -->
        <div class="form-group">
            <label for="name">Nume clădire *</label>
            <InputText id="name"
                       @bind-Value="building!.Name"
                       class="form-control" />
            <ValidationMessage For="@(() => building!.Name)" />
        </div>

        <!-- Floors count (MISSING BEFORE) -->
        <div class="form-group">
            <label for="floors">Număr de etaje *</label>
            <InputNumber id="floors"
                         @bind-Value="building!.FloorsCount"
                         class="form-control"
                         min="1" />
            <ValidationMessage For="@(() => building!.FloorsCount)" />
        </div>

        <FormActions CancelUrl="@($"/buildings/{building!.PhaseId}")" />

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="alert alert-danger">@errorMessage</div>
        }
    </EditForm>

    <!-- Images -->
    <ImageGallery Images="building!.Images"
                  AddImageUrl="@($"/images/create/building/{building!.BuildingId}")" />

</EditPageLayout>